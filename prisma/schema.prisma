// This is your Prisma schema file,
  // learn more about it in the docs: https://pris.ly/d/prisma-schema

  generator client {
    provider = "prisma-client-js"
  }

  datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
  }

  model User {
    id        String   @id @default(cuid())
    email     String   @unique
    password  String
    name      String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    teams     Team[]
  }

  model Player {
    id          String       @id @default(cuid())
    name        String
    position    String
    club        String
    nationality String
    age         Int
    rating      Int
    photoUrl    String?

    // API-Football integration fields
    apiFootballId    Int?         @unique  // External API player ID
    height           String?              // e.g., "185 cm"
    weight           String?              // e.g., "80 kg"
    birthDate        DateTime?            // More precise than age
    birthPlace       String?              // City/country of birth
    marketValue      String?              // Current market value
    contractUntil    DateTime?            // Contract expiration
    lastSyncAt       DateTime?            // When we last synced with API

    createdAt   DateTime     @default(now())
    teamPlayers TeamPlayer[]
  }

  model Team {
    id          String       @id @default(cuid())
    name        String
    formation   String       @default("4-3-3")
    userId      String
    user        User         @relation(fields: [userId], references: [id], onDelete: Cascade)
    createdAt   DateTime     @default(now())
    updatedAt   DateTime     @updatedAt
    teamPlayers TeamPlayer[]
  }

  model TeamPlayer {
    id       String @id @default(cuid())
    teamId   String
    playerId String
    position String
    team     Team   @relation(fields: [teamId], references: [id], onDelete: Cascade)
    player   Player @relation(fields: [playerId], references: [id], onDelete: Cascade)

    @@unique([teamId, playerId])
    @@unique([teamId, position])
  }